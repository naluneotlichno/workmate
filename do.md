# Roadmap (План работ)

+ Проанализировать требования и уточнить спорные моменты из TZ.md

- Создать структуру проекта.

- Спроектировать структуру API: эндпоинты для создания задач, добавления файлов, проверки статуса
- Реализовать in-memory хранилище для задач и файлов (без БД)
- Реализовать эндпоинт для создания новой задачи (лимит на 3 одновременные задачи)
- Реализовать эндпоинт для добавления ссылок на файлы в задачу (валидация типа и количества)
- Реализовать эндпоинт для получения статуса задачи и ссылки на архив (если готово)
- Реализовать скачивание файлов, фильтрацию по .pdf/.jpeg, обработку ошибок недоступных ссылок
- Реализовать архивацию доступных файлов и формирование отчёта об ошибках
- Ограничить одновременную обработку 3 архивов
- Добавить конфиг для расширений и порта (8080 по умолчанию)
- Написать README.md с описанием паттернов, конфига и инструкции по запуску
- Протестировать все эндпоинты и edge-case'ы

---

# Функциональные требования

## 1. Поддерживаемые типы файлов

- Только .pdf и .jpeg (без .jpg, без других форматов)
- Расширение не чувствительно к регистру (.PDF, .jpeg — ок)

## 2. Ограничение на количество файлов

- В задаче максимум 3 файла
- Если пытаются добавить больше — возвращаю ошибку, лишние не принимаю

## 3. Недоступные ссылки

- Если файл не скачался — в архив не попадает
- Задача считается завершённой, если хотя бы один файл скачался
- В ответе на статус задачи указываю, какие ссылки не удалось скачать (список ошибок)

## 4. Статус задачи и архив

- Архив формируется автоматически при добавлении третьего файла или при запросе статуса, если файлов уже три
- Если хотя бы один файл скачался — архив создаётся из доступных файлов, остальные — в ошибках

## 5. Лимит на 3 задачи

- Одновременно “в работе” могут быть только 3 задачи, где ещё не выдан архив (то есть, статус не “готово”)
- Как только архив выдан (или задача завершена с ошибками) — слот освобождается

## 6. Хранение архивов

- Архивы хранятся до первого скачивания или до перезапуска сервера (in-memory, без БД)
- После скачивания архив удаляется из памяти

---

# Технические детали

- Все ответы — в JSON
- Для ошибок отдельное поле errors (массив строк)
- Для успешных операций — поле archive_url (если архив готов), status (текущий статус задачи), files (список добавленных файлов)
- Без авторизации, но с простейшей защитой: лимит на 3 задачи и 3 файла на пользователя (по IP)

---

# Конфиг

- Расширения и порт (8080 по умолчанию) задаются через конфиг-файл или переменные окружения
